#!/usr/bin/env sh
# Wrapper to run the PowerShell pre-commit hook on Windows (or fall back to shell)
HOOK_DIR="$(cd "$(dirname "$0")" && pwd)"
if command -v pwsh >/dev/null 2>&1; then
  exec pwsh -NoProfile -ExecutionPolicy Bypass -File "$HOOK_DIR/pre-commit.ps1"
elif command -v powershell >/dev/null 2>&1; then
  exec powershell -NoProfile -ExecutionPolicy Bypass -File "$HOOK_DIR/pre-commit.ps1"
else
  echo "PowerShell not found; attempting to run pre-commit.sh" >&2
  if [ -x "$HOOK_DIR/pre-commit.sh" ]; then
    exec "$HOOK_DIR/pre-commit.sh"
  fi
  echo "No suitable pre-commit runner found. Install PowerShell (pwsh) to enable secret scanning." >&2
  exit 0
fi